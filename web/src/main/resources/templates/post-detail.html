<div class="main-container" xmlns:th="http://www.thymeleaf.org"
     xmlns:layout="http://www.ultraq.net.nz/web/thymeleaf/layout"
     layout:decorate="~{base_layout}" layout:fragment="~{body}" th:remove="tag">
  <div class="container">
    <div class="row">
      <div class="col-md-12">
        <nav aria-label="breadcrumb" role="navigation" class="pull-left">
          <ol class="breadcrumb">
            <li class="breadcrumb-item"><a href="#"><i class="icon-home fa"></i></a></li>
            <li class="breadcrumb-item"><a th:href="@{/getAllPost}">All Ads</a></li>
            <li class="breadcrumb-item active" aria-current="page"
                th:text="${post.category.name}"></li>
          </ol>
        </nav>
      </div>
    </div>
  </div>
  <div class="container">
    <div class="row">
      <div class="col-md-9 page-content col-thin-right">
        <div class="inner inner-box ads-details-wrapper">
          <h2 th:text="${post.title}">
            <small class="label label-default adlistingtype">Company ad</small>
          </h2>
          <span class="info-row"> <span class="date" th:text="${post.postDate}">
            <i class=" icon-clock"> </i>  </span> - <span
              class="category" th:text="${post.category.name}"> </span>- <span class="item-location"
                                                                               th:text="${post.user.country}"><i
              class="fa fa-map-marker-alt"></i></span> </span>
          <span>
                          <i class="fa fa-eye"></i>
                          <span th:text="${post.view}"></span>
                        </span>


          <div class="ads-image">
            <ul class="bxslider">
              <li><img th:if="${post.picUrl!= null}" th:src="@{/getImages(picUrl=${post.picUrl})}">
              </li>
            </ul>
          </div>
          <!--ads-image-->

          <div class="Ads-Details">
            <h5 class="list-title"><strong>Ads</strong></h5>

            <div class="row">
              <div class="ads-details-info col-md-8">
                <input type="hidden" id="postId" th:value="${post.id}">
                <p th:text="${post.shortDescription}"></p>
                <h4>Ads Details</h4>
                <ul class="list-circle">
                  <li th:text="${post.description}"></li>
                </ul>
              </div>
              <div class="col-md-4">
                <aside class="panel panel-body panel-details">
                  <ul>
                    <li>
                      <p class=" no-margin " th:text="${post.salary}"><strong>Salary: </strong></p>
                    </li>
                    <li>
                      <p class="no-margin"><a
                          th:href="@{/getPostByCategory(id=${post.category.id})}"
                          th:text="${post.category.name}"></a>
                    </li>
                    <li>
                      <p class="no-margin" th:text="${post.location}"><strong>Location:</strong></p>
                    </li>
                  </ul>
                </aside>
                <div class="ads-action">
                  <ul class="list-border">
                    <li><a th:href="@{/getPostByUser(id=${post.user.id})}"> <i
                        class=" fa fa-user"></i> More ads by User </a></li>
                    <li><a href="#" id="saved"> <i th:if="${post.saved==true}"
                                                   class=" fa fa-heart"></i>

                      <i th:if="${post.saved==false}" class="far fa-heart"></i>
                      Save ad </a></li>

                  </ul>
                </div>
              </div>
            </div>
            <div class="content-footer text-left"><a class="btn  btn-default" data-toggle="modal"
                                                     href="#contactAdvertiser"><i
                class=" icon-mail-2"></i> Send a message </a> <a class="btn  btn-info"><i
                class=" icon-phone-1"></i> 01680 531 352 </a></div>
          </div>
        </div>
        <!--/.ads-details-wrapper-->

      </div>
      <!--/.page-content-->

      <div class="col-md-3  page-sidebar-right">
        <aside>

          <div class="card card-user-info sidebar-card">
            <div class="block-cell user">

              <div class="cell-media">
                <img th:if="${post.user.picUrl!= null}"
                     th:src="@{/getImages(picUrl=${post.user.picUrl})}" alt="">
              </div>
              <div class="cell-content">
                <h5 class="title">Posted by</h5>
                <span class="name">
                  <a th:href="@{/getAllPostByUser(id=${post.user.id})}">
                    <span th:text="${post.user.name}+' '+ ${post.user.surname}">
                      </span>
                  </a>
                </span>
              </div>
            </div>
            <div class="card-content">
              <div class="card-body text-left">
                <div class="grid-col">
                  <div class="col from">
                    <i class="fas fa-map-marker-alt"></i>
                    <span>Location</span>
                  </div>
                  <div class="col to">
                    <span th:text="${post.user.country}"> </span>
                  </div>
                </div>

                <div class="grid-col">
                  <div class="col from">
                    <i class="fas fa-user"></i>
                    <span>Joined</span>
                  </div>
                  <div class="col to">
                    <span th:text="${post.user.profileCreated}"></span>
                  </div>
                </div>

                <div class="grid-col">
                  <div class="col from">
                    <i class="fas fa-clock"></i>
                    <span>Last Online</span>
                  </div>
                  <div class="col to">
                    <span th:text="${post.user.activeDate}"></span>
                  </div>
                </div>

              </div>

              <div class="ev-action">
                <a class="btn btn-success btn-block" data-toggle="modal" href="#contactAdvertiser">
                  <i class=" icon-mail-2"></i> Contact User
                </a>
                <a class="btn  btn-info btn-block">
                  <i class=" icon-phone-1"></i> 01680 531 352 </a>
              </div>

            </div>
          </div>

          <div class="card sidebar-card">
            <div class="card-header">Safety Tips for Buyers</div>
            <div class="card-content">
              <div class="card-body text-left">
                <ul class="list-check">
                  <li>Meet seller at a public place</li>
                  <li>Check the item before you buy</li>
                  <li>Pay only after collecting the item</li>
                </ul>
                <p><a class="float-right" href="#"> Know more <i
                    class="fa fa-angle-double-right"></i> </a>
                </p>
              </div>
            </div>
          </div>
          <!--/.categories-list-->
        </aside>
      </div>
      <!--/.page-side-bar-->
    </div>
  </div>
</div>

<div class="modal fade" id="contactAdvertiser" tabindex="-1" role="dialog">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h4 class="modal-title"><i class=" icon-mail-2"></i> Contact advertiser </h4>

        <button type="button" class="close" data-dismiss="modal"><span
            aria-hidden="true">&times;</span><span
            class="sr-only">Close</span></button>
      </div>
      <div class="modal-body">
        <form role="form">
          <div class="form-group">
            <label for="recipient-name" class="control-label">Name:</label>
            <input class="form-control required" id="recipient-name" placeholder="Your name"
                   data-placement="top" data-trigger="manual"
                   data-content="Must be at least 3 characters long, and must only contain letters."
                   type="text">
          </div>
          <div class="form-group">
            <label for="sender-email" class="control-label">E-mail:</label>
            <input id="sender-email" type="text"
                   data-content="Must be a valid e-mail address (user@gmail.com)"
                   data-trigger="manual"
                   data-placement="top" placeholder="email@you.com" class="form-control email">
          </div>
          <div class="form-group">
            <label for="recipient-Phone-Number" class="control-label">Phone Number:</label>
            <input type="text" maxlength="60" class="form-control" id="recipient-Phone-Number">
          </div>
          <div class="form-group">
            <label for="message-text" class="control-label">Message <span
                class="text-count">(300) </span>:</label>
            <textarea class="form-control" id="message-text" placeholder="Your message here.."
                      data-placement="top" data-trigger="manual"></textarea>
          </div>
          <div class="form-group">
            <p class="help-block pull-left text-danger hide" id="form-error">&nbsp; The form is not
              valid. </p>
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
        <button type="submit" class="btn btn-success pull-right">Send message!</button>
      </div>
    </div>
  </div>
</div>

<!-- /.modal -->

<!-- Modal contactAdvertiser -->

<div class="modal fade" id="reportAdvertiser" tabindex="-1" role="dialog">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h4 class="modal-title"><i class="fa icon-info-circled-alt"></i> There's something wrong
          with this ads?
        </h4>

        <button type="button" class="close" data-dismiss="modal"><span
            aria-hidden="true">&times;</span><span
            class="sr-only">Close</span></button>
      </div>
      <div class="modal-body">
        <form role="form">
          <div class="form-group">
            <label for="report-reason" class="control-label">Reason:</label>
            <select name="report-reason" id="report-reason" class="form-control">
              <option value="">Select a reason</option>
              <option value="soldUnavailable">Item unavailable</option>
              <option value="fraud">Fraud</option>
              <option value="duplicate">Duplicate</option>
              <option value="spam">Spam</option>
              <option value="wrongCategory">Wrong category</option>
              <option value="other">Other</option>
            </select>
          </div>
          <div class="form-group">
            <label for="recipient-email" class="control-label">Your E-mail:</label>
            <input type="text" name="email" maxlength="60" class="form-control"
                   id="recipient-email">
          </div>
          <div class="form-group">
            <label for="message-text2" class="control-label">Message <span
                class="text-count">(300) </span>:</label>
            <textarea class="form-control" id="message-text2"></textarea>
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
        <button type="button" class="btn btn-primary">Send Report</button>
      </div>
    </div>
  </div>
</div>

<script>
  $(document).ready(function () {
    var saved = 0;
    var id = $('#postId').val();
    $('#saved').click(function () {
      if ($('.fa-heart').hasClass("fa")) {
        $('.fa-heart').removeClass("fa").addClass("far");
      } else if ($('.fa-heart').hasClass("far")) {
        isSaved = 1;
        $('.fa-heart').removeClass("far").addClass("fa");
      }
      $.ajax({
        url: "updatePost/saved?id=" + id + "&saved=" + saved,
        type: "get",
        success: function (data) {
          console.log(data)
        }

      })
    })
  })
</script>